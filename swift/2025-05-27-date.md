## Date & NSDate

- `Date()` 또는 `Date.now`: 현재 날짜와 시각
- 내부적으로는 기준 시점(2001-01-01 00:00:00 UTC)으로부터 몇 초가 지났는지를 저장
- Toll-Free Bridging: Swift ↔ Object-C 간에 타입 자동 호환 기능 (`Date` ↔ `NSDate`)
    
    ```swift
    let nsdate = Date.now as NSDate
    ```
    
<br />

```swift
let now = Date()
let after1hour = Date(timeIntervalSinceNow: 60 * 60) // 현재로부터 1시간 후
let before1hour = Date(timeIntervalSinceReferenceDate: (-60 * 60) // 기준 시점으로부터 1시간 전
```
<br />

## Calendar & DateComponents

- `Calendar`: 날짜 계산 담당
    - `.current`: 변경 추적 X
    - `.autoupdatingCurrent`: 변경 추적 O
- `DateComponents`: 연/월/일/시/분/초 등 개별 단위 표현

```swift
let calendar = Calendar.current
let comps = calendar.dateComponents([.year, .month, .day], from: .now)
print(comps.year) // 2025
print(comps.month) // 5
print(comps.day) // 27
print(calendar.component(.year, from: .now)) // "27 May 2025 at 12:00 AM"
let day100 = calendar.date(byAdding: .day, value: 100, to: Date()) // +100일
```
<br />

## TimeInterval

- 단위: 초 (Double)

```swift
let oneHour = TimeInterval(60 * 60)
let tomorrow = Date(timeIntervalSinceNow: oneHour * 24)
```
<br />

## Locale, TimeZone

- `Locale`: 언어 및 지역 설정 (`”ko_KR”`, `“en_US”`)
- `TimeZone`: 시간대 설정

```swift
formatter.locale = Locale(identifier: "ko_KR")
calendar.timeZone = TimeZone(identifier: "Asia/Seoul")
```
<br />

## Date Formatter

- 날짜/시간을 문자열로 반환하거나 그 반대 수행

```swift
let formatter = DateFormatter()
formatter.locale = Locale(identifier: "ko_KR")
formmater.setLocalizedDateFormatFromTemplate("yyyyMMMMdE")
let result = formatter.string(from: .now)
```
<br />

### 상대 날짜 표현

- "오늘", "어제", "내일" 자동 처리

```swift
formatter.doesRelativeDateFormatting = true
```
<br />

### 사용자 지정 상징

```swift
formatter.amSymbol = "🌅"
formatter.pmSymbol = "🌇"
formatter.weekdaySymbols = ["☀️", "🌕", ...]
```
<br />

### 문자열 → 날짜

```swift
formatter.dateFormat = "yyyy-MM-dd'T'HH:mm:ss'Z'"
let str = "2017-09-02T09:30:00Z"
let date = formatter.date(from: str) // 2017년 9월 2일 토요일 오전 9시 30분 0초 대한민국 표준시
```
<br />

### DateIntervalFormatter

- 날짜 범위를 표현할 때 사용

```swift
let intervalFormatter = DateIntervalFormatter()
intervalFormatter.dateTemplate = "yyyyMMMdE"
intervalFormatter.locale = Locale(identifier: "ko_KR")
intervalFormatter.string(from: startDate, to: endDate)
```
<br />

### DateComponentsFormatter

```swift
let formatter = DateComponentsFormatter()
formatter.unitsStyle = .full
formatter.allowedUnits = [.hour, .minute]
formatter.string(from: 3600 * 1.5) // "1시간 30분"
```
<br />

## 날짜 파싱

- `ISO8601DateFormatter`: 국제 표준 형식의 문자열을 `Date`로 변환하거나 그 반대를 수행

```swift
let formatter = ISO8601DateFormatter()
let str = "2017-09-02T09:30:00Z"

if let date = formatter.date(from: str) {
    print(formatter.string(from: date)) // 2017-09-02T09:30:00Z
} else {
    print("fail")
}
```
<br />

### formatOptions

```swift
let formatter = ISO8601DateFormatter()
let str = "2017-09-02"
formatter.formatOptions = [.withFullDate]

if let date = formatter.date(from: str) {
    print(formatter.string(from: date)) // 2017-09-02
} else {
    print("fail")
}
```
